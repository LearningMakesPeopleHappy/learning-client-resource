# HTTP详解3

《HTTP详解2》中我们介绍了**HTTP协议**是如何规范HTTP请求的消息的，并且我们还特别说明了，**HTTP协议**并不参与具体的消息发送过程，所以你一定很好奇是怎么将HTTP消息发送出去的，发送消息之前我们总要知道消息要发往何方，下面我们就先来了解如何查找服务器在互联网中的地址。



小问号你一定有很多小朋友——我们在**URL**中已经提供了**域名**了，**域名**不就是我们想要访问的服务器的地址吗？

NONONO，在《HTTP详解1》中我们就说明了，**域名**只是服务器的名字。就好比你想去你朋友家做客，但是你只知道你朋友的名字，而没有朋友家的地址，你是没办法去的。所以我们一定要通过名字查找到对应的地址。

大家有可能会对**IP**这个名词有一定的印象，这里的**IP**不是知识产权的Intellectual Property，而是**互联网协议地址**的**Internet Protocol Address**（简称**IP地址**）。

**IP地址**长什么样呢？它是由四组数字通过点分隔符（`.`）连接在一起组成的：

```
255.255.255.255
```

就是这样的。这种表示方法叫做**点分四组表示法**（或**点分十进制表示法**）。这其中每一组数字的范围都是`0-255`之间（包括`0`和`255`，数学上表示为`[0, 255]`）。

在现代互联网中，每一个接入互联网的设备（包括**终端**、**集线器**、**交换机**、**路由器**、**服务器**等）都会被分配一个**IP地址**，这个**IP地址**就是每一个设备在互联网中独一无二的地址，我们可以通过这个**IP地址**找到对应的设备。

> 这里介绍的是**IPv4地址**，实际上**IPv4地址**理论上只够分配42 9496 7296个设备（现实中接入互联网的设备数量早就远远超过了42亿）。虽然当前我们使用<u>子网寻址</u>解决了**IPv4地址**不够分的情况，但是为了应付未来可能出现的问题，科学家们提出了**IPv6地址**，**IPv6地址**理论上可以分配340 2823 6692 0938 4634 6337 4607 4317 6821 1456个设备，**IPv6地址**结构一般是由8个四位十六进制数通过冒号分割符（`:`）连接的，例如`5f05:2000:80ad:5800:0058:0800:2023:1d71`。由于现阶段支持**IPv6地址**的设备较少，所以我们在这里只介绍**IPv4地址**。

就像一个人名至少对应个住址，一个域名也至少要对应一个**IP地址**，这么多的**域名**和**IP地址**我们不可能都存储在我们自己的计算机上（并且**域名**和**IP地址**也是在变化的），那我们怎么知道这个**域名**对应哪个**IP地址**呢？

这里就要介绍一个我们之前在现代互联网组成中没有介绍过的一个组成部分——**DNS服务器**。**DNS服务器**就是专门为我们提供**IP地址**查询的服务器。

当浏览器解析完**URL**并且创建好一个**HTTP报文**之后，浏览器中就会有两个数据，一个是**URI**一个是**URI**对应的**HTTP报文**。这个时候浏览器就会主动向**DNS服务器**发起询问，查询当前**URI**对应的**IP地址**是多少。

向**DNS服务器**发送查询的时候我们会使用**UDP协议**发送这条查询消息。

既然是网络协议了，那么就和之前介绍的**HTTP协议**类似了，我们需要按照**UDP协议**的规定来拼接UPD消息。

不过不同于**HTTP协议**的一点是，**HTTP协议**中使用字符串拼接协议，而**UDP协议**中使用二进制来拼接协议。

> 我们日常生活中使用的是十进制，由`0-9`的数字组成，如果一个位数字大于或等于`10`了就需要向前进一位。二进制就是由`0`和`1`组成的数字，如果一个位数字大于或等于`2`了就需要向前进一位，也就是说，二进制的`0`等于是十进制的`0`，二进制的`1`等于十进制的`1`，二进制的`10`等于十进制的`3`，二进制的`11`等于十进制的`4`，二进制的`100`等于十进制的`5`。注意，这里二进制的`10`并不读作十，而是读作一零，同理，二进制的`11`不读作十一，而是读作一一，二进制的`100`不读作一百，而是读作一零零。

使用二进制的原因大家可以理解为是要节省流量（还有节省处理时间）。因为在网络中传输使用的是电信号，电信号可以认为是由`0`和`1`组成的（通过电压高低来识别`0`和`1`）。所以我们发送消息最终都会转变为二进制从而使用电信号发送。直接使用二进制不仅节省了将普通字符转换为二进制的过程，并且还减少了电信号传输的长度。

打个比方，我们之间相互约定好，`00`表示不高兴，`01`表示高兴，`10`表示心情一般，这样我们在网络传输中只需要用到两个字。而如果我们直接发送“不高兴”、“高兴”、“一般”的话，首先需要将文字转换为设备能够识别的二进制，“不高兴”会转为`111001001011100010001101 111010011010101110011000 111001011000010110110100`，“高兴”会转为`111010011010101110011000 111001011000010110110100`，“一般”会转为`111001001011100010000000 111010001000100010101100`。对比直接的二进制，不仅长度翻了十几倍，而且还要浪费转换的时间。

所以我们在拼接**UDP协议**的时候直接使用二进制来拼接。



