36. 有效的数独

## 题目

判断一个 9x9 的数独是否有效。只需要根据以下规则，验证已经填入的数字是否有效即可。

数字 1-9 在每一行只能出现一次。
数字 1-9 在每一列只能出现一次。
数字 1-9 在每一个以粗实线分隔的 3x3 宫内只能出现一次。

```
┏━━━┯━━━┯━━━┳━━━┯━━━┯━━━┳━━━┯━━━┯━━━┓
┃ 5 │ 3 │   ┃   │ 7 │   ┃   │   │   ┃
┠───┼───┼───╂───┼───┼───╂───┼───┼───┨
┃ 6 │   │   ┃ 1 │ 9 │ 5 ┃   │   │   ┃
┠───┼───┼───╂───┼───┼───╂───┼───┼───┨
┃   │ 9 │ 8 ┃   │   │   ┃   │ 6 │   ┃
┣━━━┿━━━┿━━━╋━━━┿━━━┿━━━╋━━━┿━━━┿━━━┫
┃ 8 │   │   ┃   │ 6 │   ┃   │   │ 3 ┃
┠───┼───┼───╂───┼───┼───╂───┼───┼───┨
┃ 4 │   │   ┃ 8 │   │ 3 ┃   │   │ 1 ┃
┠───┼───┼───╂───┼───┼───╂───┼───┼───┨
┃ 7 │   │   ┃   │ 2 │   ┃   │   │ 6 ┃
┣━━━┿━━━┿━━━╋━━━┿━━━┿━━━╋━━━┿━━━┿━━━┫
┃   │ 6 │   ┃   │   │   ┃ 2 │ 8 │   ┃
┠───┼───┼───╂───┼───┼───╂───┼───┼───┨
┃   │   │   ┃ 4 │ 1 │ 9 ┃   │   │ 5 ┃
┠───┼───┼───╂───┼───┼───╂───┼───┼───┨
┃   │   │   ┃   │ 8 │   ┃   │ 7 │ 9 ┃
┗━━━┷━━━┷━━━┻━━━┷━━━┷━━━┻━━━┷━━━┷━━━┛
```

上图是一个部分填充的有效的数独。

数独部分空格内已填入了数字，空白格用 `'.'` 表示。

> **测试**
>
> 输入:
> [
>   ["5","3",".",".","7",".",".",".","."],
>   ["6",".",".","1","9","5",".",".","."],
>   [".","9","8",".",".",".",".","6","."],
>   ["8",".",".",".","6",".",".",".","3"],
>   ["4",".",".","8",".","3",".",".","1"],
>   ["7",".",".",".","2",".",".",".","6"],
>   [".","6",".",".",".",".","2","8","."],
>   [".",".",".","4","1","9",".",".","5"],
>   [".",".",".",".","8",".",".","7","9"]
> ]
> 输出: true
>
> 输入:
> [
>   ["8","3",".",".","7",".",".",".","."],
>   ["6",".",".","1","9","5",".",".","."],
>   [".","9","8",".",".",".",".","6","."],
>   ["8",".",".",".","6",".",".",".","3"],
>   ["4",".",".","8",".","3",".",".","1"],
>   ["7",".",".",".","2",".",".",".","6"],
>   [".","6",".",".",".",".","2","8","."],
>   [".",".",".","4","1","9",".",".","5"],
>   [".",".",".",".","8",".",".","7","9"]
> ]
> 输出: false
> 解释: 除了第一行的第一个数字从 5 改为 8 以外，空格内其他数字均与 示例1 相同。
>      但由于位于左上角的 3x3 宫内有两个 8 存在, 因此这个数独是无效的。

**说明**:

- 一个有效的数独（部分已被填充）不一定是可解的。
- 只需要根据以上规则，验证已经填入的数字是否有效即可。
- 给定数独序列只包含数字 1-9 和字符 '.' 。
- 给定数独永远是 9x9 形式的。

## 思路

### 一次遍历集合判定



#### 时间复杂度



#### 空间复杂度



#### 代码

```javascript
/**
 * @param {character[][]} board
 * @return {boolean}
 */
var isValidSudoku = function(board) {
    let x = 0;
    let x_list = new Set();
    let y_map = new Map();
    let group = new Map();
    while (x < 9) {
        let y = 0;
        while (y < 9) {
            let val = board[x][y];
            if (val !== '.') {
                if (x_list.has(val)) {
                    return false;
                } else {
                    x_list.add(val);
                }

                let y_list = y_map.get(y);
                if (!y_list) {
                    y_list = new Set();
                    y_list.add(val);
                    y_map.set(y, y_list);
                } else {
                    if (y_list.has(val)) {
                        return false;
                    } else {
                        y_list.add(val);
                    }
                }

                let group_index = Math.floor(x / 3) * 3 + Math.floor(y / 3);
                let groupSet = group.get(group_index);
                if (!groupSet) {
                    groupSet = new Set();
                    groupSet.add(val);
                    group.set(group_index, groupSet);
                } else {
                    if (groupSet.has(val)) {
                        return false;
                    } else {
                        groupSet.add(val);
                    }
                }
            }

            y++;
        }

        x++;
        x_list.clear();
    }

    return true;
};
```

